<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="CMPUT 296" />
  <meta name="author" content="written by Eddie Antonio Santos" />
  <meta name="dcterms.date" content="2018-03-12" />
  <title>Lab 8: JavaScript: type coersion, and objects</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      div.line-block{white-space: pre-line;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; min-height: 1.25em; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; }
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
@media screen {
a.sourceLine::before { text-decoration: underline; color: initial; }
}
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.bn { color: #40a070; } /* BaseN */
code span.fl { color: #40a070; } /* Float */
code span.ch { color: #4070a0; } /* Char */
code span.st { color: #4070a0; } /* String */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.ot { color: #007020; } /* Other */
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.fu { color: #06287e; } /* Function */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code span.cn { color: #880000; } /* Constant */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.ss { color: #bb6688; } /* SpecialString */
code span.im { } /* Import */
code span.va { color: #19177c; } /* Variable */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.op { color: #666666; } /* Operator */
code span.bu { } /* BuiltIn */
code span.ex { } /* Extension */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.at { color: #7d9029; } /* Attribute */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="simple.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">Lab 8: JavaScript: type coersion, and objects</h1>
<p class="author">CMPUT 296</p>
<p class="author">written by Eddie Antonio Santos</p>
<p class="date">March 12, 2018</p>
</header>
<h1 id="overview">Overview</h1>
<ul>
<li>Become familiar with JavaScript objects</li>
<li>Become familiar with JavaScript’s</li>
</ul>
<h1 id="materials">Materials</h1>
<ul>
<li>Google Chrome’s <a href="https://developer.chrome.com/devtools">DevTools</a></li>
<li>A text editor</li>
</ul>
<h1 id="procedure">Procedure</h1>
<p>Submit your responses to the questions in this lab on eClass.</p>
<blockquote>
<p><strong>Question X</strong>: Questions look like this.</p>
</blockquote>
<p><strong>Remember to cite your sources</strong>.</p>
<h2 id="intermediate-javascript">Intermediate JavaScript</h2>
<p>In this lab, we’ll explore some of the more esoteric features of the JavaScript programming language. Along the way, we’ll be learning how to use Chrome’s JavaScript debugger.</p>
<h2 id="wat.js">wat.js</h2>
<blockquote cite="http://www.stroustrup.com/blast.html">
<p>
There are only two kinds of programming languages: those people always [complain] about and those nobody uses.
</p>
<cite><a href="http://www.stroustrup.com/blast.html">Bjarne Stroustrup</a>, Creator of C++</cite>
</blockquote>
<p>As a warm-up exercise, we’ll explore the more infamous aspects of JavaScript, such as its <strong>weak typing</strong>, <strong>type coercion</strong>, and using IEEE 754 <strong>double-precision floating point</strong> numbers as its built-in numeric type.</p>
<h3 id="wat-type-coercion-and-weak-typing">wat: Type coercion and weak typing</h3>
<aside>
Note that “weakly-typed” and “strongly-typed” is more of a continuum than a dichotomy; a programming language can be sometimes weakly-typed and sometimes strongly-typed. For example, Python 3 will convert between <code>int</code> and <code>float</code> automatically, and has “truthy” and “falsey” values, but is strongly-typed in that it does not allow automatic conversion between strings and numbers, and it does not like to mix byte and Unicode strings.
</aside>
<p><strong>Type coercion</strong> is the automatic conversion from one data type to another in programming languages without necessarily requesting it. Languages that perform implicit type conversions like this are often called <strong>weakly-typed</strong>, because they translate between data types without the programmer explicitly requesting any type conversions. Conversely, a programming language that <em>requires</em> the programmer specify when to convert between data types—say when converting between a string and a number—is called a <strong>strongly-typed</strong> programming language.</p>
<p>Let’s determine whether JavaScript is a <strong>weakly-typed</strong> or <strong>strongly-typed</strong> language.</p>
<p>In Google Chrome, on any webpage, open up the <a href="https://developers.google.com/web/tools/chrome-devtools/console/?hl=en">DevTools JavaScript Console</a> (Windows/Linux: <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>J</kbd>; macOS: <kbd>Cmd</kbd> + <kbd>Alt</kbd> + <kbd>J</kbd>).</p>
<p>We’re going to write a very small program that determines how old you are. Type the following into the Console:</p>
<pre class="sourceCode javascript" id="cb1"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">var</span> birthYear <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&quot;What year were you born?&quot;</span>)<span class="op">;</span></a></code></pre>
<p>Answer the prompt by typing an appropriate <strong>positive integer</strong> (e.g., I would have written <code>1992</code> in the prompt).</p>
<blockquote>
<p><strong>Question 1</strong>: What is the type of the variable <code>birthYear</code>?</p>
</blockquote>
<p>Now type the following:</p>
<pre class="sourceCode javascript" id="cb2"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">var</span> yourAge <span class="op">=</span> (<span class="kw">new</span> <span class="at">Date</span>()).<span class="at">getFullYear</span>() <span class="op">-</span> birthYear<span class="op">;</span></a></code></pre>
<blockquote>
<p><strong>Question 2</strong>: What is the type of the variable <code>yourAge</code>?</p>
</blockquote>
<p>Now finish it by writing a two lines of code that will print how old you are:</p>
<pre class="sourceCode javascript" id="cb3"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">var</span> message <span class="op">=</span> <span class="st">&quot;You are &quot;</span> <span class="op">+</span> yourAge <span class="op">+</span> <span class="st">&quot; years old&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="va">console</span>.<span class="at">log</span>(message)<span class="op">;</span></a></code></pre>
<blockquote>
<p><strong>Question 3</strong>: Write the same small program in Python (asks for your birth year, calculates your age, prints it in a sentence). Use <code>input()</code> and <code>print()</code> instead of <code>prompt()</code> and <code>console.log()</code> (you may hard code the current year instead of using the <code>datetime</code> module). Make sure your Python program works, and copy-paste it as the answer to this question.</p>
</blockquote>
<blockquote>
<p><strong>Question 4</strong>: Did JavaScript perform any implicit type conversions? How many type conversions and where?</p>
</blockquote>
<blockquote>
<p><strong>Question 5</strong>: Try the JavaScript version again, but this time, instead of entering your birth year as a positive integer in the <code>prompt()</code>, write it out in English (e.g., <code>nineteen-ninety-two</code>). What is the output of the <code>console.log()</code>? Is this different than what you expected? Explain.</p>
</blockquote>
<p>Try the following lines in the JavaScript console and observe the results:</p>
<pre class="sourceCode javascript" id="cb4"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="dv">1</span> <span class="op">==</span> <span class="st">&#39;1&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="dv">0</span> <span class="op">==</span> <span class="st">&#39;&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="dv">1</span> <span class="op">==</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="dv">70</span> <span class="op">==</span> <span class="st">&#39;0x070&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="op">+</span><span class="st">&#39;42&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="op">+</span><span class="st">&#39;0xbadbeef&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="op">+</span><span class="st">&#39;0xgoodbeef&#39;</span><span class="op">;</span></a></code></pre>
<blockquote>
<p><strong>Question 6</strong>: What is the result of each line of code? Did any of the results surprise you?</p>
</blockquote>
<blockquote>
<p><strong>Question 7</strong>: What is the type of this expression?</p>
<pre><code>&quot;42&quot;</code></pre>
<p>What is the type of this expression?</p>
<pre><code>+&quot;42&quot;</code></pre>
<p>What is the type of this expression?</p>
<pre><code>+&quot;forty-two&quot;</code></pre>
</blockquote>
<blockquote>
<p><strong>Question 8</strong>: Explain the behaviour of the following JavaScript expression:</p>
<pre><code>70 == &#39;0x070&#39;;</code></pre>
<p>Why does it return what it returns?</p>
</blockquote>
<p>Use your experimentations in the previous section to justify the following questions.</p>
<blockquote>
<p><strong>Question 9</strong>: Is JavaScript more of a <strong>weakly-typed</strong> language or a <strong>strongly-typed</strong> language? Provide code to justify your answer.</p>
</blockquote>
<blockquote>
<p><strong>Question 10</strong>: State one <strong>advantage</strong> of weak typing.</p>
</blockquote>
<blockquote>
<p><strong>Question 11</strong>: State one <strong>disadvantage</strong> of weak typing.</p>
</blockquote>
<h3 id="how-to-avoid-confusion-parseint-parsefloat-and">How to avoid confusion: <code>parseInt()</code>, <code>parseFloat</code>, <code>===</code> and <code>!==</code></h3>
<p>Whenever you are converting from a string to a number, use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt#Syntax"><code>parseInt()</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseFloat#Syntax"><code>parseFloat()</code></a> functions as appropriate.</p>
<blockquote>
<p><strong>Question 12</strong>: Rewrite the first line of the JavaScript program (i.e., <code>var birthYear = prompt(&quot;What year were you born?&quot;);</code>) using either <code>parseInt()</code> or <code>parseFloat()</code> (which ever you think is most appropriate. Paste this revised line of code as the answer to this question. What will happen if I enter in my birth year as <code>0x1992</code> into the prompt?</p>
</blockquote>
<p>When comparing items of different types, use the <strong>strict equality operators</strong>: <code>===</code> and <code>!==</code>.</p>
<blockquote>
<p><strong>Question 13</strong>: In JavaScript, what is the difference between the output and meaning of the following two statements?</p>
<p>1 == true;</p>
<p>1 === true;</p>
</blockquote>
<h3 id="wat-ieee-754-floating-point">wat: IEEE 754 floating point</h3>
<p>JavaScript’s default numeric type is <a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE 754</a> Binary64 “double precision” floating point format. This number representation is available as the <code>float</code> type in Python and is (usually) the <code>double</code> type in C/C++.</p>
<p>Quick facts about floating points:</p>
<ul>
<li>numbers are <em>approximations</em> of (real numbers)</li>
<li>includes many finite values, two infinities, and lots of <strong>NaN</strong>.</li>
</ul>
<p>Since there are a limited number of whole numbers that can be precisely represented using IEEE 754 floats, arithmetic becomes counter-intuitive as the numbers become more and more extreme.</p>
<p>For example, in double-precision floating points, numbers, adding 1 to a number no longer works as you would expect when the one of the numbers is sufficiently large. For example, try this in your favourite language with floating point numbers (I’m using Python:</p>
<pre class="sourceCode python" id="cb9"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="fl">1000000000000000000.0</span> <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="fl">1e+18</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="fl">1000000000000000000.0</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="fl">1000000000000000000.0</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="va">True</span></a></code></pre>
<p>However, for small whole numbers, this arithmetic works as you would expect:</p>
<pre class="sourceCode python" id="cb10"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="op">&gt;&gt;&gt;</span> <span class="fl">100.0</span> <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="fl">101.0</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="op">&gt;&gt;&gt;</span> <span class="fl">100.0</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">==</span> <span class="fl">100.0</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="va">False</span></a></code></pre>
<p>Let’s find the point at which arithmetic stops making sense. Write a JavaScript program that outputs the <strong>minimum power of 2</strong> at which adding 1 to a number no longer works as expected. That is, at what value of <em>n</em> is this expression true?</p>
<pre><code>(2 ** n + 1) === (2 ** n)</code></pre>
<blockquote>
<p><strong>Question 14</strong>: Copy-paste your program as the answer to this question.</p>
</blockquote>
<blockquote>
<p><strong>Question 15</strong>: At what power of 2 does adding one to a number no longer work as expected?</p>
</blockquote>
<!--
Forgetting var; creating a global

NaN

nan in Python. nan in C.
-->
<!-- at what power of can you no longer -->
<!--
triple equal
-->
<!--
make them define a Python class, method, and then do the

>>> whoami(object.method())

print(type(self))


Do the same thing in JavaScript

class Herp {
   derp() {
      console.log(this);
   }
}

>>> whoami((new Herp).derp)

Use Function.bind(obj)

-->
</body>
</html>
